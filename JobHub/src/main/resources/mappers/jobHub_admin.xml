<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">



<mapper namespace="com.jobhub.admin">

	<resultMap type="adminDto" id="adminResultMap">
		<id column="PERSONAL_NUMBER" property="pNo" />
		<result column="PERSONAL_NAME" property="pName" />
		<result column="PERSONAL_ID" property="pId" />
		<result column="PERSONAL_PASSWORD" property="pPwd" />
		<result column="PERSONAL_PHONENUMBER" property="pPhoneNum" />
		<result column="PERSONAL_COMPANY" property="pCom" />
		<result column="PERSONAL_NICKNAME" property="pNickname" />
		<result column="PERSONAL_PROFILE" property="pProfile" />
		<result column="PERSONAL_EMAIL" property="pEmail" />
		<result column="PERSONAL_HIRE_DATE" property="pHireDate"
			javaType="java.util.Date" />
		<result column="PERSONAL_KEYWORD" property="pKeyword" />
		<result column="PERSONAL_TEMPORARILY" property="pTemporarily" />
		<result column="PERMISSION" property="pPermission" />
		<result column="PERSONAL_CREATE_DATE" property="pCreateDate" 
			javaType="java.util.Date" />
		<result column="PERSONAL_MODIFY_DATE" property="pModifyDate" 
			javaType="java.util.Date" />
		<result column="CONNECTION_TIME" property="pConnectionTime" 
			javaType="java.util.Date" />
		<result column="DISCONNECTION_TIME" property="pDisconnectionTime" 
			javaType="java.util.Date" />
	</resultMap>

	

	<select id="memberSelectList"  parameterType="map" resultMap="adminResultMap">
		SELECT PERSONAL_NUMBER, PERSONAL_NAME, PERSONAL_ID
        		, PERSONAL_NICKNAME, PERMISSION, PERSONAL_CREATE_DATE
       		 	, PERSONAL_MODIFY_DATE
		FROM PERSONAL
		UNION
		SELECT COMPANY_NUMBER, COMPANY_INCHARGE_NAME
				, COMPANY_CODE, COMPANY_NAME, PERMISSION
				, COMPANY_CREATE_DATE, COMPANY_MODIFY_DATE
		FROM COMPANY
		ORDER BY PERMISSION
<!-- 		WHERE PERSONAL.RNUM BETWEEN #{start} AND #{end} -->
	</select>
		
		<select id="adminExist" parameterType="map"
		resultMap="adminResultMap">
		SELECT PERSONAL_NAME, PERSONAL_ID, PERMISSION
		FROM PERSONAL
		WHERE PERSONAL_ID = #{pId} AND PERSONAL_PASSWORD = #{pPwd}
	</select>
	
	<delete id="adminDeleteOne" parameterType="adminDto">
		DELETE FROM PERSONAL
		 WHERE PERSONAL_NUMBER = #{pNo}
	</delete>
	
	<delete id="personalDeleteOne" parameterType="adminDto">
		DELETE FROM PERSONAL
		 WHERE PERSONAL_NUMBER = #{pNo}
	</delete>
	
	<delete id="companyDeleteOne" parameterType="adminDto">
		DELETE FROM COMPANY
		 WHERE COMPANY_NUMBER = #{cNo}
	</delete>
</mapper>