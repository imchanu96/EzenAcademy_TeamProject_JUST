<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">



<mapper namespace="com.jobhub.admin">

	<resultMap type="adminDto" id="adminResultMap">
		<id column="PERSONAL_NUMBER" property="pNo" />
		<result column="PERSONAL_NAME" property="pName" />
		<result column="PERSONAL_ID" property="pId" />
		<result column="PERSONAL_PASSWORD" property="pPwd" />
		<result column="PERSONAL_PHONENUMBER" property="pPhoneNum" />
		<result column="PERSONAL_COMPANY" property="pCom" />
		<result column="PERSONAL_NICKNAME" property="pNickname" />
		<result column="PERSONAL_PROFILE" property="pProfile" />
		<result column="PERSONAL_EMAIL" property="pEmail" />
		<result column="PERSONAL_HIRE_DATE" property="pHireDate"
			javaType="java.util.Date" />
		<result column="PERSONAL_KEYWORD" property="pKeyword" />
		<result column="PERSONAL_TEMPORARILY" property="pTemporarily" />
		<result column="PERMISSION" property="pPermission" />
		<result column="PERSONAL_CREATE_DATE" property="pCreateDate" 
			javaType="java.util.Date" />
		<result column="PERSONAL_MODIFY_DATE" property="pModifyDate" 
			javaType="java.util.Date" />
		<result column="CONNECTION_TIME" property="pConnectionTime" 
			javaType="java.util.Date" />
		<result column="DISCONNECTION_TIME" property="pDisconnectionTime" 
			javaType="java.util.Date" />
	</resultMap>
	
	<resultMap type="companyMemberDto" id="companyResultMap">
		<result column="COMPANY_NAME" property="cName" />	
		<result column="COMPANY_NAME" property="cName" />
		<result column="COMPANY_ADDRESS" property="cAdd" />
		<result column="COMPANY_TYPE" property="cType" />
		<result column="COMPANY_ESTABLISH_DATE" property="cEstDate" 
		javaType="java.util.Date" />
		<result column="COMPANY_HOMEPAGE" property="cHomepage" />
		<result column="COMPANY_INTRODUCE" property="cIntroduce" />
		<result column="COMPANY_ID" property="cId" />
		<result column="COMPANY_PASSWORD" property="cPwd" />
		<result column="COMPANY_CODE" property="cCode" />
		<result column="COMPANY_LICENSE" property="cLicense" />
		<result column="COMPANY_LOGO" property="cLogo" />
		<result column="COMPANY_PRESIDENT_NAME" property="cPrName" />
		<result column="COMPANY_INCHARGE_NAME" property="cInChargeName" />
		<result column="COMPANY_INCHARGE_EMAIL" property="cInChargeEmail" />
		<result column="COMPANY_INCHARGE_PHONENUMBER" property="cInChargePhoneNum" />
		<result column="COMPANY_PREFER" property="cPrefer" />
		<result column="COMPANY_CREATE_DATE" property="cCreDate" />
		<result column="COMPANY_MODIFY_DATE" property="cModDate" />
		<result column="CONNECTION_TIME" property="connTime" />
		<result column="DISCONNECTION_TIME" property="disconnTime" />	
	</resultMap>

	

	<select id="memberSelectList"  parameterType="map" resultMap="adminResultMap">
		SELECT PERSONAL_NUMBER, PERSONAL_NAME, PERSONAL_ID
        		, PERSONAL_NICKNAME, PERMISSION, PERSONAL_CREATE_DATE
       		 	, PERSONAL_MODIFY_DATE
		FROM PERSONAL
		UNION
		SELECT COMPANY_NUMBER, COMPANY_INCHARGE_NAME
				, COMPANY_CODE, COMPANY_NAME, PERMISSION
				, COMPANY_CREATE_DATE, COMPANY_MODIFY_DATE
		FROM COMPANY
		ORDER BY PERMISSION
<!-- 		WHERE PERSONAL.RNUM BETWEEN #{start} AND #{end} -->
	</select>
		
		<select id="adminExist" parameterType="map"
		resultMap="adminResultMap">
		SELECT PERSONAL_NAME, PERSONAL_ID, PERMISSION
		FROM PERSONAL
		WHERE PERSONAL_ID = #{pId} AND PERSONAL_PASSWORD = #{pPwd}
	</select>
	
	<update id="personalUpdateOne" parameterType="map">
		UPDATE PERSONAL
		 SET PERMISSION = 0
		 WHERE PERSONAL_NUMBER = #{pNo}
	</update>
	
	<update id="companyUpdateOne" parameterType="map">
		UPDATE COMPANY
		 SET PERMISSION	= 0
		 WHERE COMPANY_NUMBER = #{cNo}
	</update>
</mapper>