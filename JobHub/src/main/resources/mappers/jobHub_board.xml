<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">



<mapper namespace="com.jobhub.board">

	<resultMap type="boardDto" id="boardResultMap">
		<id column="BOARD_NUMBER" property="bNo" />
		<result column="BOARD_TAG" property="bTag" />
		<result column="BOARD_TITLE" property="bTitle" />
		<result column="BOARD_WRITER" property="bWriter" />
		<result column="BOARD_CONTENT" property="bContent" />
		<result column="BOARD_IMAGE" property="bImg" />
		<result column="BOARD_VOTING_CHECK" property="bVotingCheck" />
		<result column="BOARD_CREATE_DATE" property="bCreDate" javaType="java.util.Date"/>
		<result column="BOARD_MODIFY_DATE" property="bModDate" javaType="java.util.Date"/>
		<result column="BOARD_LIKE_COUNT" property="bLikeCount" />
		<result column="BOARD_VIEWS" property="bViews" />
	</resultMap>

	<select id="boardSelectList" resultMap="boardResultMap">
		SELECT BOARD_NUMBER, BOARD_TITLE, BOARD_WRITER, BOARD_CREATE_DATE, BOARD_VIEWS
		FROM BOARD
		ORDER BY BOARD_NUMBER DESC
	</select>
	
	<insert id="boardInsertOne" parameterType="boardDto">
		INSERT INTO BOARD
			(BOARD_NUMBER, BOARD_WRITER, BOARD_TITLE, BOARD_CONTENT, BOARD_CREATE_DATE, BOARD_MODIFY_DATE,
            PERSONAL_NUMBER)
		VALUES(BOARD_NUMBER_SEQ.NEXTVAL, #{bWriter}, #{bTitle}, #{bContent}, SYSDATE, SYSDATE, 1)
	</insert>
	
	<select id="boardSelectOne" parameterType="int" resultMap="boardResultMap">
		SELECT BOARD_NUMBER, BOARD_TITLE, BOARD_WRITER, BOARD_CREATE_DATE, BOARD_CONTENT
		FROM BOARD
		WHERE BOARD_NUMBER =#{bNo}
	</select>
	
	<update id="boardUpdateOne" parameterType="boardDto">
		UPDATE BOARD
	    SET BOARD_TITLE = #{bTitle}, BOARD_CONTENT = #{bContent}, BOARD_MODIFY_DATE = SYSDATE
	    WHERE BOARD_NUMBER =#{bNo}
	</update>
	
	<delete id="boardDeleteOne" parameterType="int">
		DELETE FROM BOARD
		WHERE BOARD_NUMBER =#{bNo}
	</delete>
	
	<update id="increaseViews" parameterType="int">
		UPDATE BOARD
		SET BOARD_VIEWS = bViews+1
		WHERE BOARD_NUMBER =#{bNo}
	</update>
	
</mapper>