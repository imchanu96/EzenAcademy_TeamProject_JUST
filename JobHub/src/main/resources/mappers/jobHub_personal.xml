<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">



<mapper namespace="com.jobhub.personal">
	<resultMap type="PersonalMemberDto" id="personalResultMap">
		<id column="PERSONAL_NUMBER" property="pNo" />
		<result column="PERSONAL_NAME" property="pName" />
		<result column="PERSONAL_ID" property="pId" />
		<result column="PERSONAL_PASSWORD" property="pPwd" />
		<result column="PERSONAL_PHONENUMBER" property="pPhoneNum" />
		<result column="PERSONAL_COMPANY" property="pCom" />
		<result column="PERSONAL_NICKNAME" property="pNickname" />
		<result column="PERSONAL_PROFILE" property="pProfile" />
		<result column="PERSONAL_EMAIL" property="pEmail" />
		<result column="PERSONAL_HIRE_DATE" property="pHireDate"
			javaType="java.util.Date" />
		<result column="PERSONAL_KEYWORD" property="pKeyword" />
		<result column="PERSONAL_TEMPORARILY" property="pTemporarily" />
		<result column="PERMISSION" property="pPermission" />
		<result column="PERSONAL_CREATE_DATE" property="pCreateDate" 
			javaType="java.util.Date" />
		<result column="PERSONAL_MODIFY_DATE" property="pModifyDate" 
			javaType="java.util.Date" />
		<result column="CONNECTION_TIME" property="pConnectionTime" 
			javaType="java.util.Date" />
		<result column="DISCONNECTION_TIME" property="pDisconnectionTime" 
			javaType="java.util.Date" />
	</resultMap>
	
	<select id="memberSelectList"  parameterType="map" resultMap="personalResultMap">
		SELECT PERSONAL.PERSONAL_NUMBER, PERSONAL.PERSONAL_NAME, PERSONAL.PERSONAL_ID, PERSONAL.PERSONAL_NICKNAME
    , PERSONAL.PERMISSION, PERSONAL.PERSONAL_CREATE_DATE, PERSONAL.PERSONAL_MODIFY_DATE
		FROM(   SELECT ROWNUM AS RNUM, P.PERSONAL_NUMBER, P.PERSONAL_NAME
        , P.PERSONAL_ID, P.PERSONAL_NICKNAME, P.PERMISSION, P.PERSONAL_CREATE_DATE, P.PERSONAL_MODIFY_DATE
        		FROM(   SELECT PERSONAL_NUMBER, PERSONAL_NAME, PERSONAL_ID
                            ,PERSONAL_NICKNAME, PERMISSION, PERSONAL_CREATE_DATE, PERSONAL_MODIFY_DATE
                		FROM PERSONAL
                		ORDER BY PERSONAL_CREATE_DATE DESC
                ) P
		) PERSONAL
<!-- 		WHERE PERSONAL.RNUM BETWEEN #{start} AND #{end} -->
	</select>
	
	<insert id="personalInsertOne" parameterType="PersonalMemberDto">
<!-- 		useGeneratedKeys="true" keyProperty="pNo"> -->
<!-- 		<selectKey keyProperty="pNo" resultType="int" order="BEFORE"> -->
<!-- 			SELECT PERSONAL_NUMBER_SEQ.NEXTVAL -->
<!-- 			FROM DUAL -->
<!-- 		</selectKey> -->
		INSERT INTO PERSONAL
			VALUE(PERSONAL_NUMBER, PERSONAL_NAME, PERSONAL_ID
			    , PERSONAL_PASSWORD, PERSONAL_PHONENUMBER
			    , PERSONAL_COMPANY, PERSONAL_NICKNAME
			    , PERSONAL_PROFILE, PERSONAL_EMAIL
			    , PERSONAL_HIRE_DATE, PERSONAL_TEMPORARILY
			    , PERMISSION, PERSONAL_CREATE_DATE ,PERSONAL_MODIFY_DATE)
			VALUES(PERSONAL_NUMBER_SEQ.NEXTVAL, #{pName}, #{pId}
				, #{pPwd}, #{pPhoneNum}
				, #{pCom}, #{pNickname}
				, #{pProfile}, #{pEmail}
				, #{pHireDate}, #{pTemporarily}
				, 1, SYSDATE, SYSDATE)

<!-- 			INSERT INTO PERSONAL -->
<!-- 			VALUE(PERSONAL_NUMBER, PERSONAL_NAME, PERSONAL_ID -->
<!-- 			    , PERSONAL_PASSWORD, PERSONAL_PHONENUMBER, PERSONAL_EMAIL -->
<!-- 			    , PERMISSION, PERSONAL_CREATE_DATE ,PERSONAL_MODIFY_DATE -->
<!-- 			    , CONNECTION_TIME, DISCONNECTION_TIME) -->
<!-- 			VALUES(PERSONAL_NUMBER_SEQ.NEXTVAL, #{pName}, #{pId}, #{pPwd}, #{pPhoneNum} -->
<!-- 			, #{pEmail} , 1, SYSDATE, SYSDATE, SYSDATE, SYSDATE) -->
	</insert>
</mapper>